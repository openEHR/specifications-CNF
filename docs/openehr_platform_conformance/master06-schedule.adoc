= Conformance Schedule

== Overview

This section contains the schedule according to which conformance claims can be made for a a product. The conformance test schedule is divided into functional and non-functional parts, for which the structures are slightly different. 

Functional conformance is on the basis of _product component_, i.e. 'EHR persistence', 'Querying' etc, each corresponding to a named block on the above SUT diagram. Each product component has one table in this schedule. Formal conformance points, defined in terms of calls in the relevant component service interface, are listed in the second column of the table. The first column groups conformance points under 'capability', which is understood as a marketing term reflecting coarse-grained functionality, and is _used as the basis for conformance profiles_ described in the next section. 

The remaining columns but one describe each 'semantic' conformance point, and define the logic of a conformance test case for it, expressed as Java-like pseudo-code. In many cases, one test script may be used to test multiple conformance points. 

The final column(s) provides the implementation of the test case for REST web services over HTTP. Each other protocol will result in a new column on the right.

The following illustrates the conformance table structure for functional components.

[cols="2,2,3,2,2", options="header"]
|===
|Capability             |Conformance Point +
                         (Service Model call)   |Description                            |Test case script      |REST script
                
|Claimed capability +
 of the component.      |Testable characteristic +
                         defined in terms of +
                         abstract service model call.|Description of conformance point.  |Logical test case + 
                                                                                         script (pseudo-code)   |REST API test script +
                                                                                                                 (postman)
|===

For the small number of system non-functional characteristics for which conformance is defined here, the table structure is the same. However, conformance points are not formally defined by the openEHR Service Model, but informally defined by this specification.

== Functional Conformance

=== Definitions Component

Specifications:
    
* Service Interfaces:
** {openehr_sm_openehr_platform}#_ehr_package[Abstract EHR Service Model]
** {openehr_ehr_rest_api}[EHR REST API]
* Language / formalism Models:
** {openehr_am_adl14}[ADL 1.4]
** {openehr_am_aom14}[AOM 1.4]
** {openehr_am_adl2}[ADL 2]
** {openehr_am_aom2}[AOM 2]
** {openehr_am_id}[Archetype Identification]

:i_definition_adl14_link: {openehr_sm_openehr_platform}#_i_definition_adl14_interface
:i_definition_adl2_link: {openehr_sm_openehr_platform}#_i_definition_adl2_interface
:i_definition_query_link: {openehr_sm_openehr_platform}#_i_definition_query_interface

[cols="1,2,3,2,1", options="header"]
|===
|Capability             |Conformance Point +
                         (Service Model call)   |Description                            |Test case script      |REST script

.3+|*ADL 1.4 Archetype +
    provisioning*       
    
    |{i_definition_adl14_link}[`I_DEFINITION_ADL14`, window="_blank"] +
     `__.upload_archetype()__`
    |Upload an ADL 1.4 archetype
 .3+|link:{scripts_dir}/tc_def-adl14_prov.txt[tc_def-adl14_prov, window="_blank"]
 .3+|link:{scripts_dir}/REST/postman/tc_def-adl14_prov.json[postman, window="_blank"]
 
    |{i_definition_adl14_link}[`I_DEFINITION_ADL14`, window="_blank"] +
     `__.get_archetype()__`
    |Get an ADL 1.4 archetype by archetype_id

    |{i_definition_adl14_link}[`I_DEFINITION_ADL14`, window="_blank"] +
     `__.list_all_archetypes()__`            
    |List all available ADL 1.4 archetypes

.3+|*ADL 1.4 +
    OPT +
    provisioning*       
    
    |{i_definition_adl14_link}[`I_DEFINITION_ADL14`, window="_blank"] +
     `__.upload_opt()__`            
    |Upload an ADL 1.4-based OPT
 .3+|link:{scripts_dir}/tc_def-opt14_prov.txt[tc_def-opt14_prov, window="_blank"]
 .3+|link:{scripts_dir}/REST/postman/tc_def-opt14_prov.json[postman, window="_blank"]

    |{i_definition_adl14_link}[`I_DEFINITION_ADL14`, window="_blank"] +
     `__.get_opt()__`               
    |Get template by template_id

    |{i_definition_adl14_link}[`I_DEFINITION_ADL14`, window="_blank"] +
     `__.list_all_opts()__`
    |List all available Operational Templates


.3+|*ADL2 +
    Archetype +
    provisioning*       
    
    |{i_definition_adl2_link}[`I_DEFINITION_ADL2`, window="_blank"] +
     `__.upload_artefact()__`
    |Upload an ADL 2 archetype
 .6+|link:{scripts_dir}/tc_def-adl2_prov.txt[tc_def-adl2_prov, window="_blank"]
 .6+|link:{scripts_dir}/REST/postman/tc_def-adl2_prov.json[postman, window="_blank"]
 
    |{i_definition_adl2_link}[`I_DEFINITION_ADL2`, window="_blank"] +
     `.__get_artefact()__`
    |Get an ADL 2 archetype by archetype_id

    |{i_definition_adl2_link}[`I_DEFINITION_ADL2`, window="_blank"] +
     `__.list_all_archetypes()__`
    |List all available ADL 2 archetypes

.3+|*ADL2 +
    OPT +
    provisioning*       
    
    |{i_definition_adl2_link}[`I_DEFINITION_ADL2`, window="_blank"] +
     `__.upload_artefact()__`
    |Upload an OPT2 template.

    |{i_definition_adl2_link}[`I_DEFINITION_ADL2`, window="_blank"] +
     `__.get_artefact()__`               
    |Get OPT2 template by template_id.

    |{i_definition_adl2_link}[`I_DEFINITION_ADL2`, window="_blank"] +
     `__.list_all_opts()__`
    |List all available OPT2 templates.

.4+|*Query +
    provisioning*       
    
    |{i_definition_query_link}[`I_DEFINITION_QUERY`, window="_blank"] +
     `__.register_query()__`
    |Register a query under an optional name.
 .4+|link:{scripts_dir}/tc_def-qry_prov.txt[tc_def-qry_prov, window="_blank"]
 .4+|link:{scripts_dir}/REST/postman/tc_def-qry_prov.json[postman, window="_blank"]
 
    |{i_definition_query_link}[`I_DEFINITION_QUERY`, window="_blank"] +
     `__.list_all_queries()__`
    |List all registered queries.

    |{i_definition_query_link}[`I_DEFINITION_QUERY`, window="_blank"] +
     `__.list_all_matching_queries()__`
    |List registered queries matching a pattern.

    |{i_definition_query_link}[`I_DEFINITION_QUERY`, window="_blank"] +
     `__.delete_query()__`
    |Delete a query.

|===

=== EHR Persistence Component

Specifications:
    
* Service Interfaces:
** {openehr_sm_openehr_platform}#_ehr_package[Abstract EHR Service Model]
** {openehr_ehr_rest_api}[EHR REST API]
* Information Models:
** {openehr_rm_ehr}[EHR IM]
** {openehr_rm_common}[Common IM]
** {openehr_rm_data_structures}[Data Structures IM]
** {openehr_rm_data_types}[Data Types IM]
** {openehr_rm_support}[Support IM]
** {openehr_rm_common}#_change_control_package[Versioning]

:i_ehr_service_link: {openehr_sm_openehr_platform}#_i_ehr_service_interface
:i_ehr_link: {openehr_sm_openehr_platform}#_i_ehr_interface
:i_ehr_status_link: {openehr_sm_openehr_platform}#_i_ehr_status_interface
:i_ehr_directory_link: {openehr_sm_openehr_platform}#_i_ehr_directory_interface
:i_ehr_composition_link: {openehr_sm_openehr_platform}#_i_ehr_composition_interface
:i_ehr_contribution_link: {openehr_sm_openehr_platform}#_i_ehr_contribution_interface

[cols="1,2,3,2,1", options="header"]
|===
|Capability             |Conformance Point +
                         (Service Model call)   |Description                            |Test case script      |REST script

.6+|*EHR Operations*         

    |{i_ehr_service_link}[`I_EHR_SERVICE`, window="_blank"] +
     `__.create_ehr()__`
    |Create a new EHR; EHR id generated by system
    |link:{scripts_dir}/tc_ehr-create.txt[tc_ehr-create, window="_blank"]
    |link:{scripts_dir}/REST/postman/tc_ehr-create.json[postman, window="_blank"]

    |{i_ehr_service_link}[`I_EHR_SERVICE`, window="_blank"] +
     `__.create_ehr_with_id()__`
    |Create new EHR with the specified EHR id
    |link:{scripts_dir}/tc_ehr-create_id.txt[tc_ehr-create_id, window="_blank"]
    |link:{scripts_dir}/REST/postman/tc_ehr-create_id.json[postman, window="_blank"]

    |{i_ehr_service_link}[`I_EHR_SERVICE`, window="_blank"] +
     `__.create_ehr_for_subject()__`
    |Create new EHR with the specified subject id; EHR id generated by system
    |link:{scripts_dir}/tc_ehr-create_sub.txt[tc_ehr-create_sub, window="_blank"]
    |link:{scripts_dir}/REST/postman/tc_ehr-create_sub.json[postman, window="_blank"]

    |{i_ehr_service_link}[`I_EHR_SERVICE`, window="_blank"] +
     `__.create_ehr_for_subject_with_id()__`
    |Create new EHR with the specified EHR id and subject id.
    |link:{scripts_dir}/tc_ehr-create_sub_id.txt[tc_ehr-create_sub_id, window="_blank"]
    |link:{scripts_dir}/REST/postman/tc_ehr-create_sub_id.json[postman, window="_blank"]

    |{i_ehr_service_link}[`I_EHR_SERVICE`, window="_blank"] +
     `__.get_ehr()__`
    |Get EHR with the specified EHR identifier.
    |
    |

    |{i_ehr_service_link}[`I_EHR_SERVICE`, window="_blank"] +
     `__.get_ehrs_for_subject()__`
    |Get EHR(s) for specified subject.
    |link:{scripts_dir}/tc_ehr-get_sub.txt[tc_ehr-get_sub, window="_blank"]
    |link:{scripts_dir}/REST/postman/tc_ehr-get_sub.json[postman, window="_blank"]

.7+|*EHR Status*         

    |{i_ehr_status_link}[`I_EHR_STATUS`, window="_blank"] +
     `__.get_ehr_status()__`
    |Get EHR modifiable and queryable status.
 .7+|link:{scripts_dir}/tc_ehr-status.txt[tc_ehr-status, window="_blank"]
 .7+|link:{scripts_dir}/REST/postman/tc_ehr-status.json[postman, window="_blank"]

    |{i_ehr_status_link}[`I_EHR_STATUS`, window="_blank"] +
     `__.get_ehr_status_at_time()__`
    |Get Ehr status at specified time

    |{i_ehr_status_link}[`I_EHR_STATUS`, window="_blank"] +
     `__.clear_ehr_modifiable()__`
    |Set EHR to non-modifiable.

    |{i_ehr_status_link}[`I_EHR_STATUS`, window="_blank"] +
     `__.clear_ehr_queryable()__`
    |Set EHR to non-queryable.

    |{i_ehr_status_link}[`I_EHR_STATUS`, window="_blank"] +
     `__.set_ehr_modifiable()__`
    |Set EHR to modifiable.

    |{i_ehr_status_link}[`I_EHR_STATUS`, window="_blank"] +
     `__.set_ehr_queryable()__`
    |Set EHR to queryable.

    |{i_ehr_status_link}[`I_EHR_STATUS`, window="_blank"] +
     `__.update_other_details()__`
    |Update other EHR status details.

.5+|*Composition Operations*  

    |{i_ehr_composition_link}[`I_EHR_COMPOSITION`, window="_blank"] +
     `__.create_composition()__`
    |Create a new Composition.
 .5+|link:{scripts_dir}/tc_ehr-comp.txt[tc_ehr-comp, window="_blank"]
 .5+|link:{scripts_dir}/REST/postman/tc_ehr-comp.json[postman, window="_blank"]

    |{i_ehr_composition_link}[`I_EHR_COMPOSITION`, window="_blank"] +
     `__.get_composition()__`
    |Get Composition by id.

    |{i_ehr_composition_link}[`I_EHR_COMPOSITION`, window="_blank"] +
     `__.get_composition_at_time()__`
    |Get Composition at specified time.

    |{i_ehr_composition_link}[`I_EHR_COMPOSITION`, window="_blank"] +
     `__.update_composition()__`
    |Create a new version of a Composition.

    |{i_ehr_composition_link}[`I_EHR_COMPOSITION`, window="_blank"] +
     `__.delete_composition()__`
    |Logically delete a Composition.
                   
.5+|*Directory Operations*

    |{i_ehr_directory_link}[`I_EHR_DIRECTORY`, window="_blank"] +
     `__.create_directory()__`
    |Create new directory in EHR.
 .5+|link:{scripts_dir}/tc_ehr-dir.txt[tc_ehr-dir, window="_blank"]
 .5+|link:{scripts_dir}/REST/postman/tc_ehr-dir.json[postman, window="_blank"]

    |{i_ehr_directory_link}[`I_EHR_DIRECTORY`, window="_blank"] +
     `__.get_directory()__`
    |Get Directory, current version.

    |{i_ehr_directory_link}[`I_EHR_DIRECTORY`, window="_blank"] +
     `__.get_directory_at_time()__`
    |Get Directory at specified time.

    |{i_ehr_directory_link}[`I_EHR_DIRECTORY`, window="_blank"] +
     `__.update_directory()__`
    |Update EHR directory.

    |{i_ehr_directory_link}[`I_EHR_DIRECTORY`, window="_blank"] +
     `__.delete_directory()__`
    |Delete EHR directory.

.5+|*Change sets*

 .3+|{i_ehr_contribution_link}[`I_EHR_CONTRIBUTION`, window="_blank"] +
     `__.commit_contribution()__`
    |Commit Contribution with one Composition.
    |link:{scripts_dir}/tc_ehr-ctrb_smpl.txt[tc_ehr-ctrb_smpl, window="_blank"]
    |link:{scripts_dir}/REST/postman/tc_ehr-ctrb-smpl.json[postman, window="_blank"]

    |Commit Contribution with new Compositions, Directory.
    |link:{scripts_dir}/tc_ehr-ctrb_cplx.txt[tc_ehr-ctrb_cplx, window="_blank"]
    |link:{scripts_dir}/REST/postman/tc_ehr-ctrb-cplx.json[postman, window="_blank"]

    |Commit mixed update Contribution with new, changed, deleted items.
    |link:{scripts_dir}/tc_ehr-ctrb_mix.txt[tc_ehr-ctrb_mix, window="_blank"]
    |link:{scripts_dir}/REST/postman/tc_ehr-ctrb-mix.json[postman, window="_blank"]

    |{i_ehr_contribution_link}[`I_EHR_CONTRIBUTION`, window="_blank"] +
     `__.get_contribution()__`
    |Get Contribution.
    |link:{scripts_dir}/tc_ehr-ctrb_get.txt[tc_ehr-ctrb_get, window="_blank"]
    |link:{scripts_dir}/REST/postman/tc_ehr-ctrb-get.json[postman, window="_blank"]

    |{i_ehr_contribution_link}[`I_EHR_CONTRIBUTION`, window="_blank"] +
     `__.list_all_contributions()__`
    |List Contributions
    |link:{scripts_dir}/tc_ehr-ctrb_list.txt[tc_ehr-ctrb_list, window="_blank"]
    |link:{scripts_dir}/REST/postman/tc_ehr-ctrb-list.json[postman, window="_blank"]

.6+|*Versioning*

    |{i_ehr_status_link}[`I_EHR_STATUS`, window="_blank"] +
     `__.get_versioned_ehr_status()__`
    |Get Versioned Ehr status
 .6+|link:{scripts_dir}/tc_ehr-vers.txt[tc_ehr-vers, window="_blank"]
 .6+|link:{scripts_dir}/REST/postman/tc_ehr-vers.json[postman, window="_blank"]

    |{i_ehr_status_link}[`I_EHR_STATUS`, window="_blank"] +
     `__.get_ehr_status_at_version()__`
    |Get Ehr status at version

    |{i_ehr_directory_link}[`I_EHR_DIRECTORY`, window="_blank"] +
     `__.get_versioned_directory()__`
    |Get Versioned Directory

    |{i_ehr_directory_link}[`I_EHR_DIRECTORY`, window="_blank"] +
     `__.get_directory_at_version()__`
    |Get Directory at version

    |{i_ehr_composition_link}[`I_EHR_COMPOSITION`, window="_blank"] +
     `__.get_versioned_composition()__`
    |Get Versioned Composition

    |{i_ehr_composition_link}[`I_EHR_COMPOSITION`, window="_blank"] +
     `__.get_composition_at_version()__`
    |Get Composition at version

.4+|*Archetype +
    Validation*

    |{i_ehr_composition_link}[`I_EHR_COMPOSITION`, window="_blank"] +
     `__.create_composition()__`
    |Attempt to create new Composition; reject invalid archetype structure.
 .4+|link:{scripts_dir}/tc_ehr-arch_val.txt[tc_ehr-arch_val, window="_blank"]
 .4+|link:{scripts_dir}/REST/postman/tc_ehr-arch_val.json[postman, window="_blank"]

    |{i_ehr_composition_link}[`I_EHR_COMPOSITION`, window="_blank"] +
     `__.create_composition()__`
    |Attempt to create new Composition; reject invalid archetype.
                                                                            
    |{i_ehr_composition_link}[`I_EHR_COMPOSITION`, window="_blank"] +
     `__.update_composition()__`
    |Attempt to update Composition; reject invalid archetype structure.

    |{i_ehr_composition_link}[`I_EHR_COMPOSITION`, window="_blank"] +
     `__.update_composition()__`
    |Attempt to update Composition; reject invalid archetype.

|===

=== Demographic Persistence Component

Specifications:

* Service Interfaces:
** {openehr_sm_openehr_platform}#_demographic_package[Abstract Demographic Service Model]
* Information Models:
** {openehr_rm_demographic}[Demographic IM]
** {openehr_rm_common}[Common IM]
** {openehr_rm_data_structures}[Data Structures IM]
** {openehr_rm_data_types}[Data Types IM]
** {openehr_rm_support}[Support IM]
** {openehr_rm_common}#_change_control_package[Versioning]

:i_demographic_service_link: {openehr_sm_openehr_platform}#_i_demographic_service_interface
:i_party_link: {openehr_sm_openehr_platform}#_i_party_interface
:i_party_relationship_link: {openehr_sm_openehr_platform}#_i_party_relationship_interface

[cols="1,2,3,2,1", options="header"]
|===
|Capability             |Conformance Point +
                         (Service Model call)       |Description          |Test case script      |REST script

.5+|*Party +
    Operations*

    |{i_demographic_service_link}[`I_DEMOGRAPHIC_SERVICE`, window="_blank"] +
     `__.create_party()__`
    |Create a new Party; Party id generated by system.
 .5+|link:{scripts_dir}/tc_dem-party.txt[tc_dem-party, window="_blank"]
 .5+|link:{scripts_dir}/REST/postman/tc_dem-party.json[postman, window="_blank"]

    |{i_party_link}[`I_PARTY`, window="_blank"] +
     `__.get_party()__`
    |Retrieve a Party, current version.

    |{i_party_link}[`I_PARTY`, window="_blank"] +
     `__.get_party_at_time()__`
    |Retrieve a Party, at a specified time.

    |{i_party_link}[`I_PARTY`, window="_blank"] +
     `__.update_party()__`
    |Update a Party.

    |{i_party_link}[`I_PARTY`, window="_blank"] +
     `__.delete_party()__`
    |Delete a Party.

.5+|*Party +
    Relationship +
    Operations*

    |{i_demographic_service_link}[`I_DEMOGRAPHIC_SERVICE`, window="_blank"] +
     `__.create_party_relationship()__`
    |Create a new Party relationship; Relationship id generated by system.
 .5+|link:{scripts_dir}/tc_dem-party_rel.txt[tc_dem-party_rel, window="_blank"]
 .5+|link:{scripts_dir}/REST/postman/tc_dem-party_rel.json[postman, window="_blank"]

    |{i_party_relationship_link}[`I_PARTY_RELATIONSHIP`, window="_blank"] +
     `__.get_party_relationship()__`
    |Retrieve a Party relationship, current version.

    |{i_party_relationship_link}[`I_PARTY_RELATIONSHIP`, window="_blank"] +
     `__.get_party_relationship_at_time()__`
    |Retrieve a Party relationship, at a specified time.

    |{i_party_relationship_link}[`I_PARTY_RELATIONSHIP`, window="_blank"] +
     `__.update_party_relationship()__`
    |Update a Party relationship.

    |{i_party_relationship_link}[`I_PARTY_RELATIONSHIP`, window="_blank"] +
     `__.delete_party_relationship()__`
    |Delete a Party relationship.

.2+|*Versioning*

    |{i_party_link}[`I_PARTY`, window="_blank"] +
     `__.get_party_at_version()__`
    |Retrieve a Party, current version.
 .2+|link:{scripts_dir}/tc_dem-vers.txt[tc_dem-vers, window="_blank"]
 .2+|link:{scripts_dir}/REST/postman/tc_dem-vers.json[postman, window="_blank"]

    |{i_party_relationship_link}[`I_PARTY_RELATIONSHIP`, window="_blank"] +
     `__.get_party_relationship_at_version()__`
    |Retrieve a Party relationship, current version.

.4+|*Archetype +
    Validation*

 .2+|{i_demographic_service_link}[`I_DEMOGRAPHIC_SERVICE`, window="_blank"] +
     `__.create_party()__`
    |Attempt to create new Party; reject invalid archetype structure.
 .4+|link:{scripts_dir}/tc_dem-arch_val.txt[tc_dem-arch_val, window="_blank"]
 .4+|link:{scripts_dir}/REST/postman/tc_dem-arch_val.json[postman, window="_blank"]

    |Attempt to create new Party; reject invalid archetype.
                                                                            
 .2+|{i_demographic_service_link}[`I_PARTY_SERVICE`, window="_blank"] +
     `__.update_party()__`
    |Attempt to update Party; reject invalid archetype structure.

    |Attempt to update Party; reject invalid archetype.
                                                                            
|===


=== Querying Component

Specifications:

* Service Interfaces:
** {openehr_sm_openehr_platform}#_query_package[Abstract Query Service Model]
** {openehr_query_rest_api}[Query REST API]
* Language Specifications:
** {openehr_query_aql}[AQL specification]

:i_query_service_link: {openehr_sm_openehr_platform}#_i_query_service_interface

[cols="1,2,3,2,1", options="header"]
|===
|Capability             |Conformance Point +
                         (Service Model call)       |Description          |Test case script      |REST script

.2+|*AQL Basic*

    |{i_query_service_link}[`I_QUERY_SERVICE`, window="_blank"] +
     `__.execute_stored_query()__`
    |Execute a simple stored patient query.
    |link:{scripts_dir}/tc_aql-stor_basic.txt[tc_aql-stor_basic, window="_blank"]
    |link:{scripts_dir}/REST/postman/tc_aql-stor_basic.json[postman, window="_blank"]

    |{i_query_service_link}[`I_QUERY_SERVICE`, window="_blank"] +
     `__.execute_ad_hoc_query()__`
    |Execute a simple ad hoc patient query.
    |link:{scripts_dir}/tc_aql-adhoc_basic.txt[tc_aql-adhoc_basic, window="_blank"]
    |link:{scripts_dir}/REST/postman/tc_aql-adhoc_basic.json[postman, window="_blank"]

.2+|*AQL Advanced*

    |{i_query_service_link}[`I_QUERY_SERVICE`, window="_blank"] +
     `__.execute_stored_query()__`
    |Execute a complex stored patient query.
    |link:{scripts_dir}/tc_aql-stor_cplx.txt[tc_aql-stor_cplx, window="_blank"]
    |link:{scripts_dir}/REST/postman/tc_aql-stor_cplx.json[postman, window="_blank"]

    |{i_query_service_link}[`I_QUERY_SERVICE`, window="_blank"] +
     `__.execute_stored_query()__`
    |Execute a complex stored population query.
    |link:{scripts_dir}/tc_aql-pop_cplx.txt[tc_aql-pop_cplx, window="_blank"]
    |link:{scripts_dir}/REST/postman/tc_aql-pop_cplx.json[postman, window="_blank"]

|*AQL & +
 Terminology*

    |{i_query_service_link}[`I_QUERY_SERVICE`, window="_blank"] +
     `__.execute_stored_query()__`
    |Execute a stored query that interfaces with terminology service.
    |link:{scripts_dir}/tc_aql-tc_aql-stor_term.txt[tc_aql-stor_term, window="_blank"]
    |link:{scripts_dir}/REST/postman/tc_aql-tc_aql-stor_term.json[postman, window="_blank"]

|===


=== Admin Product Component

Specifications:

* Service Interfaces:
** {openehr_sm_openehr_platform}#_admin_package[Abstract Admin Service Model]

:i_admin_service_link: {openehr_sm_openehr_platform}#_i_admin_service_interface
:i_admin_archive_link: {openehr_sm_openehr_platform}#_i_admin_archive_interface
:i_admin_dump_load_link: {openehr_sm_openehr_platform}#_i_admin_dump_load_interface

[cols="1,2,3,2,1", options="header"]
|===
|Capability             |Conformance Point +
                         (Service Model call)       |Description          |Test case script      |REST script

.4+|*Activity Report*

    |{i_admin_service_link}[`I_ADMIN_SERVICE`, window="_blank"] +
     `__.list_contributions()__`
    |List Contributions in a time interval.
 .4+|link:{scripts_dir}/tc_adm-actv_rpt.txt[tc_adm-actv_rpt, window="_blank"]
 .4+|link:{scripts_dir}/REST/postman/tc_adm-actv_rpt.json[postman, window="_blank"]

    |{i_admin_service_link}[`I_ADMIN_SERVICE`, window="_blank"] +
     `__.contribution_count()__`
    |Get number of Contributions in a time interval.

    |{i_admin_service_link}[`I_ADMIN_SERVICE`, window="_blank"] +
     `__.versioned_composition_count()__`
    |List Versioned Compositions in a time interval.

    |{i_admin_service_link}[`I_ADMIN_SERVICE`, window="_blank"] +
     `__.composition_version_count()__`
    |Get number of Composition versions in a time interval.

.2+|*Physical Deletion*

    |{i_admin_service_link}[`I_ADMIN_SERVICE`, window="_blank"] +
     `__.physical_ehr_delete()__`
    |Physically delete an EHR.
    |link:{scripts_dir}/tc_adm-ehr_del.txt[tc_adm-ehr_del, window="_blank"]
    |link:{scripts_dir}/REST/postman/tc_adm-ehr_del.json[postman, window="_blank"]

    |{i_admin_service_link}[`I_ADMIN_SERVICE`, window="_blank"] +
     `__.physical_party_delete()__`
    |Physically delete a Party.
    |link:{scripts_dir}/tc_adm-party_del.txt[tc_adm-party_del, window="_blank"]
    |link:{scripts_dir}/REST/postman/tc_adm-party_del.json[postman, window="_blank"]

.2+|*EHR Dump/Load*

    |{i_admin_dump_load_link}[`I_ADMIN_DUMP_LOAD`, window="_blank"] +
     `__.export_ehrs()__`
    |Export all EHRs from EHR service.
 .2+|link:{scripts_dir}/tc_adm-dump_load.txt[tc_adm-dump_load, window="_blank"]
 .2+|link:{scripts_dir}/REST/postman/tc_adm-dump_load.json[postman, window="_blank"]

    |{i_admin_dump_load_link}[`I_ADMIN_DUMP_LOAD`, window="_blank"] +
     `__.load_ehrs()__`
    |Populate the EHR service from a file archive.

|*EHR Archive*

    |{i_admin_archive_link}[`I_ADMIN_ARCHIVE`, window="_blank"] +
     `__.archive_ehrs()__`
    |Archive selected EHRs from EHR service.
    |link:{scripts_dir}/tc_adm-arcv_ehrs.txt[tc_adm-arcv_ehrs, window="_blank"]
    |link:{scripts_dir}/REST/postman/tc_adm-arcv_ehrs.json[postman, window="_blank"]

|*Demographic Archive*

    |{i_admin_archive_link}[`I_ADMIN_ARCHIVE`, window="_blank"] +
     `__.archive_parties()__`
    |Archive selected Parties and relationships from Demographic service.
    |link:{scripts_dir}/tc_adm-arcv_party.txt[tc_adm-arcv_party, window="_blank"]
    |link:{scripts_dir}/REST/postman/tc_adm-arcv_party.json[postman, window="_blank"]

|===


=== Messaging Component

Specifications:

* Service Interfaces:
** {openehr_sm_openehr_platform}#_message_package[Abstract Message Service Model]
* Information Models:
** {openehr_rm_ehr_extract}[EHR Extract IM]
** {openehr_rm_ehr}[EHR IM]
** {openehr_rm_demographic}[Demographic IM]
** {openehr_rm_common}[Common IM]
** {openehr_rm_data_structures}[Data Structures IM]
** {openehr_rm_data_types}[Data Types IM]
** {openehr_rm_support}[Support IM]

:i_message_service_link: {openehr_sm_openehr_platform}#_i_message_service_interface
:i_ehr_extract_link: {openehr_sm_openehr_platform}#_i_ehr_extract_interface
:i_tdd_link: {openehr_sm_openehr_platform}#_i_tdd_interface

[cols="1,2,3,2,1", options="header"]
|===
|Capability             |Conformance Point +
                         (Service Model call)       |Description          |Test case script      |REST script

.4+|*EHR Extract*

    |{i_ehr_extract_link}[`I_EHR_EXTRACT`, window="_blank"] +
     `__.export_ehr()__`
    |Export whole EHR for one subject.
    |link:{scripts_dir}/tc_msg-extr_ehr.txt[tc_msg-extr_ehr, window="_blank"]
    |link:{scripts_dir}/REST/postman/tc_msg-extr_ehr.json[postman, window="_blank"]

    |{i_ehr_extract_link}[`I_EHR_EXTRACT`, window="_blank"] +
     `__.export_ehr_extract()__`
    |Export an extract for an EHR.
    |link:{scripts_dir}/tc_msg-extr_extr.txt[tc_msg-extr_extr, window="_blank"]
    |link:{scripts_dir}/REST/postman/tc_msg-extr_extr.json[postman, window="_blank"]

    |{i_ehr_extract_link}[`I_EHR_EXTRACT`, window="_blank"] +
     `__.export_ehrs()__`
    |Export multiple whole EHRs in Extract form.
    |link:{scripts_dir}/tc_msg-extr_ehrs.txt[tc_msg-extr_ehrs, window="_blank"]
    |link:{scripts_dir}/REST/postman/tc_msg-extr_ehrs.json[postman, window="_blank"]

    |{i_ehr_extract_link}[`I_EHR_EXTRACT`, window="_blank"] +
     `__.export_ehr_extracts()__`
    |Export extracts of multiple EHRs.
    |link:{scripts_dir}/tc_msg-extr_extrs.txt[tc_msg-extr_extrs, window="_blank"]
    |link:{scripts_dir}/REST/postman/tc_msg-extr_extrs.json[postman, window="_blank"]

.2+|*TDD*

    |{i_tdd_link}[`I_TDD`, window="_blank"] +
     `__.import_tdd()__`
    |Import a TDD for one EHR.
    |link:{scripts_dir}/tc_msg-tdd_ehr.txt[tc_msg-tdd_ehr, window="_blank"]
    |link:{scripts_dir}/REST/postman/tc_msg-tdd_ehr.json[postman, window="_blank"]

    |{i_tdd_link}[`I_TDD`, window="_blank"] +
     `__.import_tdds()__`
    |Import a TDDs for multiple EHRs.
    |link:{scripts_dir}/tc_msg-tdd_ehrs.txt[tc_msg-tdd_ehrs, window="_blank"]
    |link:{scripts_dir}/REST/postman/tc_msg-tdd_ehrs.json[postman, window="_blank"]
                 
|===


=== REST API Component

Specifications:

* Service Interfaces:
** {openehr_sm_openehr_platform}[Abstract Service Model]
** {openehr_rest_apis}[REST APIs]

[cols="1,2,3,2,1", options="header"]
|===
|Product +
 Component      |Capability        |Description                             |Test case Script   |REST Script
                
|*DEFINITION API*
|{i_definition_adl14_link}[`I_DEFINITION_ADL14`, window="_blank"] +
 {i_definition_adl2_link}[`I_DEFINITION_ADL2`, window="_blank"] +
 {i_definition_query_link}[`I_DEFINITION_QUERY`, window="_blank"]
|Exercise all functions & arguments      
|link:{scripts_dir}/tc_api-rest_def.txt[tc_api-rest_def, window="_blank"]
|link:{scripts_dir}/REST/postman/tc_api-rest_def.json[postman, window="_blank"]

|*EHR API*
|{i_ehr_service_link}[`I_EHR_SERVICE`, window="_blank"]
|Exercise all functions & arguments
|link:{scripts_dir}/tc_api-rest_ehr.txt[tc_api-rest_ehr, window="_blank"]
|link:{scripts_dir}/REST/postman/tc_api-rest_ehr.json[postman, window="_blank"]

|*DEMOGRAPHIC API*
|{i_demographic_service_link}[`I_DEMOGRAPHIC_SERVICE`, window="_blank"]
|Exercise all functions & arguments
|link:{scripts_dir}/tc_api-rest_dem.txt[tc_api-rest_dem, window="_blank"]
|link:{scripts_dir}/REST/postman/tc_api-rest_dem.json[postman, window="_blank"]

|*QUERY API*
|{i_query_service_link}[`I_QUERY_SERVICE`, window="_blank"]
|Exercise all functions & arguments
|link:{scripts_dir}/tc_api-rest_qry.txt[tc_api-rest_qry, window="_blank"]
|link:{scripts_dir}/REST/postman/tc_api-rest_qry.json[postman, window="_blank"]

|*ADMIN API*
|{i_admin_service_link}[`I_ADMIN_SERVICE`, window="_blank"] +
 {i_admin_dump_load_link}[`I_ADMIN_DUMP_LOAD`, window="_blank"] +
 {i_admin_archive_link}[`I_ADMIN_ARCHIVE`, window="_blank"]
|Exercise all functions & arguments
|link:{scripts_dir}/tc_api-rest_adm.txt[tc_api-rest_adm, window="_blank"]
|link:{scripts_dir}/REST/postman/tc_api-rest_adm.json[postman, window="_blank"]

|*MESSAGE API*
|{i_ehr_extract_link}[`I_EHR_EXTRACT`, window="_blank"] +
 {i_tdd_link}[`I_TDD`, window="_blank"]
|Exercise all functions & arguments
|link:{scripts_dir}/tc_api-rest_msg.txt[tc_api-rest_msg, window="_blank"]
|link:{scripts_dir}/REST/postman/tc_api-rest_msg.json[postman, window="_blank"]

|===

== Non-Functional Conformance

=== Security and Privacy

Specifications:
    
* Service Interfaces:
** {openehr_sm_openehr_platform}#_ehr_package[Abstract EHR Service Model]
** {openehr_ehr_rest_api}[EHR REST API]
** {openehr_demographic_rest_api}[DEMOGRAPHIC REST API]
* Information Models:
** {openehr_rm_common}#_digital_signature[Digital Signature]
** {openehr_overview}#_overview_4[EHR/Demographic separation]

[cols="1,2,3,2,1", options="header"]
|===
|Capability             |Conformance Point      |Description          |Test case script      |REST script

|*Signing*

    |{i_ehr_composition_link}[`I_EHR_COMPOSITION`, window="_blank"] +
     `__.create_composition()__`
    |Create a new signed Composition.
    |link:{scripts_dir}/tc_secpriv-sign.txt[tc_secpriv-sign, window="_blank"]
    |link:{scripts_dir}/REST/postman/tc_secpriv-sign.json[postman, window="_blank"]

|*Anonymous EHRs*

    |{i_ehr_composition_link}[`I_EHR_COMPOSITION`, window="_blank"] +
     `__.create_composition()__` +
     {i_demographic_service_link}[`I_DEMOGRAPHIC_SERVICE`, window="_blank"] +
     `__.create_party()__`
    |Create a new EHR, Demographic Party, and external link.
    |link:{scripts_dir}/tc_secpriv-anon_ehr.txt[tc_secpriv-anon_ehr, window="_blank"]
    |link:{scripts_dir}/REST/postman/tc_secpriv-anon_ehr.json[postman, window="_blank"]

|===

